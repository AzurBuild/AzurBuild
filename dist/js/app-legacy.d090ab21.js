(function(e){function t(t){for(var n,o,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"1c77":function(e,t,r){"use strict";r("d025")},"442a":function(e,t,r){"use strict";r("90bf")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=(r("0fae"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Calculator",{attrs:{id:"calc"}})],1)}),i=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"calculator-container",style:{"--chart-container-width":e.containerWidth+"px"}},[r("el-aside",{attrs:{id:"calculator-config-container",width:"570px"}},[r("el-main",{attrs:{id:"calculator-config",width:"570px"}},[r("build-info-form",{on:{"add-data":e.addLine}}),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.showList,"empty-text":"请添加图线","default-sort":{prop:"date",order:"descending"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[r("el-table-column",{attrs:{prop:"desc",label:"描述",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{stripe:"",border:"",data:t.row.buildList}},[r("el-table-column",{attrs:{property:"percent",label:"概率",sortable:"",formatter:e.percentFormatter,"sort-method":e.percentComparator}}),r("el-table-column",{attrs:{property:"count",label:"个数",sortable:""}}),r("el-table-column",{attrs:{property:"guarantee",label:"保底",sortable:"",formatter:e.guaranteeFormatter}})],1),r("div",{staticClass:"build-description",attrs:{slot:"reference",align:"left"},slot:"reference"},[r("span",{staticClass:"line-marker",style:{"background-color":e.getColor(t.row.index)}}),e._v(" "+e._s(t.row.desc)+" ")])],1)]}}])}),r("el-table-column",{attrs:{label:"欧非线",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.chartData.markLine.data.map((function(e){return e[0].coord[0]})).join("/"))+" ")]}}])}),r("el-table-column",{attrs:{prop:"mean",label:"期望抽数",align:"center",sortable:""}}),r("el-table-column",{attrs:{prop:"date",label:"添加时间",align:"center",formatter:e.timeFormatter,sortable:""}}),r("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.show?"点击隐藏":"点击显示"}},[r("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-view"+(t.row.show?"":" icon-view-disabled")},on:{click:function(r){return e.toggleShown(t.row)}}})],1),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除该图线"}},[r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.deleteLine(t.row)}}})],1)]}}])},[r("template",{slot:"header"},[r("el-popconfirm",{attrs:{title:"确定清空全部内容吗？该操作不可恢复"},on:{onConfirm:function(t){return e.deleteAll()}}},[r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[e._v("清空")])],1)],1)],2)],1)],1)],1),r("el-main",{directives:[{name:"resize",rawName:"v-resize"}],attrs:{id:"chart-container"},on:{resize:e.onChartContainerResize}},[r("v-chart",{ref:"buildChart",attrs:{id:"chart",options:e.orgOptions,autoresize:!0,theme:"macarons"}})],1)],1)},s=[],l=(r("99af"),r("cb29"),r("4de4"),r("7db0"),r("c740"),r("a15b"),r("d81d"),r("a434"),r("b0c0"),r("a9e3"),r("b680"),r("3835")),c=r("b85c"),u=r("5530"),d=(r("ef97"),r("007d"),r("817d"),r("d3b7"),r("07ac"),r("25f0"),r("6062"),r("3ca3"),r("ddb0"),r("2909")),f=r("d4ec"),m=r("bee2"),p=r("4128"),h=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=1,n=[r],a=1;a<=t;a++)n.push(r*=(e+1-a)/a);return n},b={},g=function(){function e(t){Object(f["a"])(this,e),t=t.map((function(e){return Object.assign({},e)}));for(var r=0,n=t.length-1;n>=0;n--){var a=t[n];a.percent=p["Decimal"].div(a.percent,100),b[a.count]||(b[a.count]=h(a.count)),a.rest=r,r+=a.count}var i,o=Object(d["a"])(new Set(t.filter((function(e){return e.guarantee&&e.guarantee>r})).map((function(e){return e.guarantee})))).sort((function(e,t){return e-t})),s={Infinity:o.length},u=Object(c["a"])(o.entries());try{for(u.s();!(i=u.n()).done;){var m=Object(l["a"])(i.value,2),g=m[0],v=m[1];s[v]=g}}catch(E){u.e(E)}finally{u.f()}for(var y={},w=1;w<=r;w++)(function e(r,n,a,i,l){if(0===r){var c=a.toString();return y[c]||(y[c]={base:a,coef:Array(o.length+1).fill(0)}),void(y[c].coef[s[l]]+=i)}for(var u=t[n],d=u.percent,f=u.count,m=u.rest,p=u.guarantee,h=Math.max(0,r-m);h<=Math.min(r,f);h++){var g=p&&h>0?Math.min(l,p):l;e(r-h,n+1,a.minus(d.times(h)),i*b[f][h],g)}})(w,0,new p["Decimal"](1),w%2===0?1:-1,1/0);var L,O=Array(o.length+1).fill().map((function(e,t){return{start:0===t?r:o[t-1],end:t===o.length?1/0:o[t],items:[]}})),x=new p["Decimal"](0),F=Object(c["a"])(Object.values(y).sort((function(e,t){return e.base.comparedTo(t.base)})));try{for(F.s();!(L=F.n()).done;){for(var k=L.value,j=k.base,C=k.coef.length-1,S=0;C>=0;C--)S+=k.coef[C],0!==S&&O[C].items.push([j,S]);var D,_=j.minus(1),$=p["Decimal"].div(1,_),R=new p["Decimal"](-1).dividedBy(_.pow(2)),N=Object(c["a"])(k.coef.entries());try{for(N.s();!(D=N.n()).done;){var z=Object(l["a"])(D.value,2),I=z[0],P=z[1];if(0!==P){var q=_.times(P),T=new p["Decimal"](0);if(I!==o.length){var A=o[I]-1,M=j.pow(A);x=x.add(j.times(k.coef[I+1]).minus(P).times(M).times(A+1)),T=$.times(A).add(R).times(M)}var B=T.minus(R).times(q);x=x.add(B)}}}catch(E){N.e(E)}finally{N.f()}}}catch(E){F.e(E)}finally{F.f()}this.distributionFn=O,this.mean=x}return Object(m["a"])(e,[{key:"getMean",value:function(){return this.mean}},{key:"getProbability",value:function(e){var t,r=Array(e+1).fill(0),n=Object(c["a"])(this.distributionFn);try{var a=function(){var n=t.value;if(n.start>e)return"break";for(var a=n.items.map((function(e){var t=Object(l["a"])(e,2),r=t[0],a=t[1];return{base:r,coef:r.pow(n.start-1).times(a)}})),i=n.start;i<Math.min(e+1,n.end);i++){var o,s=new p["Decimal"](1),u=Object(c["a"])(a);try{for(u.s();!(o=u.n()).done;){var d=o.value;d.coef=d.coef.times(d.base),s=s.add(d.coef)}}catch(f){u.e(f)}finally{u.f()}r[i]=Number(s.times(100).toFixed(2))}};for(n.s();!(t=n.n()).done;){var i=a();if("break"===i)break}}catch(o){n.e(o)}finally{n.f()}return r}}]),e}(),v=(r("dca8"),Object.freeze([{desc:"微层混合",buildList:{ssr:2,sr:1,r:1},date:Date.parse("2020-03-26T17:00:00+08:00"),show:!1},{desc:"复刻:苍红的回响",buildList:{ssr:1,sr:2},date:Date.parse("2020-04-23T14:30:00+08:00"),show:!1},{desc:"穹顶下的圣咏曲",buildList:{ssr:2,sr:1},date:Date.parse("2020-06-03T00:00:00+08:00"),show:!1},{desc:"永夜幻光",buildList:{ssr:2,sr:2},date:Date.parse("2020-07-23T15:00:00+08:00"),show:!1},{desc:"蝶海梦花",buildList:{ur:1,ssr:1,sr:3},date:Date.parse("2020-09-17T16:00:00+08:00"),show:!0},{desc:"激唱的UNIVERSE",buildList:{ssr:3,sr:2},date:Date.parse("2020-10-29T15:00:00+08:00"),show:!0},{desc:"假日航线",buildList:{ssr:3,sr:2},date:Date.parse("2020-11-26T15:00:00+08:00"),show:!1},{desc:"新铁血活动",buildList:{ssr:2,sr:2},date:Date.parse("2020-11-29T00:00:00+08:00"),show:!0}])),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-main",[r("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.formRules,inline:!0}},[r("el-form-item",{attrs:{label:"添加图线"}},e._l(e.shipTypes,(function(t){return r("el-form-item",{key:t.name,attrs:{prop:t.name}},[r("el-autocomplete",{staticClass:"num-input",attrs:{size:"mini","fetch-suggestions":e.querySearchNatrual},model:{value:e.form[t.name],callback:function(r){e.$set(e.form,t.name,r)},expression:"form[type.name]"}}),e._v(" "+e._s(t.label)+" ")],1)})),1),r("el-form-item",[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"mini",disabled:!e.canFormSubmit()},on:{click:e.submitForm}})],1),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"重置"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-left",circle:"",size:"mini"},on:{click:e.resetForm}})],1),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"自定义卡池"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-more",circle:"",size:"mini"},on:{click:e.openDetailedDialog}})],1)],1)],1),r("custom-build-info-dialog",{ref:"customBuildInfoDialog",on:{"add-data":e.addData}})],1)},w=[],L=Object.freeze([{name:"ur",label:"彩",percent:"1.2",guarantee:200},{name:"ssr",label:"金",percent:"2",guarantee:0},{name:"sr",label:"紫",percent:"2.5",guarantee:0},{name:"r",label:"蓝",percent:"5",guarantee:0}]),O=/^0$|^[1-9]\d*$/,x=/^[1-9]\d*$/,F=/^\d+(.\d+)?$/;function k(e){var t,r=[],n="",a=Object(c["a"])(L);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=i.name,s=i.label,l=i.percent,u=i.guarantee,d=Number(e[o]);d&&(r.push({count:d,percent:l,guarantee:u}),n+=d+s)}}catch(f){a.e(f)}finally{a.f()}return{desc:n,buildList:r}}var j=function(e){return function(t,r){return r(e.map((function(e){return{value:e}})))}},C=j(["0","1","2","3","4","5"]),S=j(["1","2","3","4","5"]),D=j(["1.2","2","2.5","5","10"]),_=j(["0","200"]),$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"自定义卡池",visible:e.visible,align:"left"},on:{"update:visible":function(t){e.visible=t},close:e.resetForm}},[r("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.formRules}},[r("el-form-item",{attrs:{label:"描述",prop:"desc","label-width":"60px"}},[r("el-input",{attrs:{placeholder:"请输入卡池描述"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("el-divider"),r("el-form-item",[r("el-form",{ref:"itemFormRef",attrs:{model:e.itemForm,rules:e.itemFormRules,inline:!0}},[r("el-form-item",{attrs:{label:"添加项目："}},[r("el-form-item",{attrs:{label:"概率",prop:"percent"}},[r("el-autocomplete",{staticClass:"detail-input",attrs:{"fetch-suggestions":e.querySearchPercent},model:{value:e.itemForm.percent,callback:function(t){e.$set(e.itemForm,"percent",t)},expression:"itemForm.percent"}}),e._v("% ")],1),r("el-form-item",{attrs:{label:"个数",prop:"count"}},[r("el-autocomplete",{staticClass:"detail-input",attrs:{"fetch-suggestions":e.querySearchPositive},model:{value:e.itemForm.count,callback:function(t){e.$set(e.itemForm,"count",t)},expression:"itemForm.count"}})],1),r("el-form-item",{attrs:{label:"保底(0为无保底)",prop:"guarantee"}},[r("el-autocomplete",{staticClass:"detail-input",attrs:{"fetch-suggestions":e.querySearchGuarantee},model:{value:e.itemForm.guarantee,callback:function(t){e.$set(e.itemForm,"guarantee",t)},expression:"itemForm.guarantee"}})],1),r("el-form-item",[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"small"},on:{click:e.onAddItem}})],1),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"重置"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-left",circle:"",size:"small"},on:{click:e.resetForm}})],1)],1)],1)],1)],1),r("el-form-item",{attrs:{prop:"buildList"}},[r("el-table",{attrs:{stripe:"",border:"",data:e.form.buildList,"empty-text":"请在上方添加项目"}},[r("el-table-column",{attrs:{property:"percent",label:"概率",sortable:"",formatter:e.percentFormatter,"sort-method":e.percentComparator}}),r("el-table-column",{attrs:{property:"count",label:"个数",sortable:""}}),r("el-table-column",{attrs:{property:"guarantee",label:"保底",sortable:"",formatter:e.guaranteeFormatter}}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除该项"}},[r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.deleteItem(t.row)}}})],1)]}}])})],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.closeDialog()}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("添加")])],1)],1)},R=[],N=(r("c975"),r("96cf"),r("1da1"));r("ac1f"),r("1276");function z(e,t,r,n){return new Date(r).toISOString().split("T")[0]}function I(e,t,r,n){return r+"%"}function P(e,t){return Number(e)-Number(t)}function q(e,t,r,n){return r||"无"}var T={name:"CustomBuildInfoDialog",data:function(){return{visible:!1,form:{desc:"",buildList:[]},formRules:{desc:{type:"string",required:!0,message:"描述不能为空",trigger:"blur"},buildList:{type:"array",required:!0,fields:{0:{type:"object",required:!0,trigger:"change"}},message:"卡池不能为空",trigger:"change"}},itemForm:{count:"1",percent:"2",guarantee:"0"},itemFormRules:{count:{pattern:x,required:!0,message:"应为正数",trigger:"change"},percent:{pattern:F,required:!0,message:"应为百分号前的数值",trigger:"change"},guarantee:{pattern:O,required:!0,message:"应为自然数",trigger:"change"}}}},methods:{percentFormatter:I,guaranteeFormatter:q,percentComparator:P,querySearchPercent:D,querySearchPositive:S,querySearchGuarantee:_,openDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.form.buildList=e,this.visible=!0},closeDialog:function(){this.visible=!1},resetForm:function(){this.$refs.formRef.resetFields(),this.$refs.itemFormRef.resetFields()},onAddItem:function(){var e=this;return Object(N["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.itemFormRef.validate();case 3:e.form.buildList.push({count:Number(e.itemForm.count),percent:e.itemForm.percent,guarantee:Number(e.itemForm.guarantee)}),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deleteItem:function(e){this.form.buildList.splice(this.form.buildList.indexOf(e),1)},submitForm:function(){var e=this;return Object(N["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.formRef.validate();case 3:e.$emit("add-data",{desc:e.form.desc,buildList:e.form.buildList}),e.closeDialog(),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},A=T,M=(r("bcac"),r("2877")),B=Object(M["a"])(A,$,R,!1,null,"8bcc5e50",null),E=B.exports,V={name:"BuildInfoForm",components:{CustomBuildInfoDialog:E},data:function(){var e,t={shipTypes:L,form:{},formRules:{}},r=Object(c["a"])(L);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.form[n.name]="0",t.formRules[n.name]=[{pattern:O,required:!0,message:"应为自然数",trigger:"change"}]}}catch(a){r.e(a)}finally{r.f()}return t},methods:{querySearchNatrual:C,canFormSubmit:function(){var e,t=!1,r=Object(c["a"])(L);try{for(r.s();!(e=r.n()).done;){var n=e.value,a=this.form[n.name];if(!O.test(a))return!1;t=t||Number(a)>0}}catch(i){r.e(i)}finally{r.f()}return t},addData:function(e){this.$emit("add-data",e)},submitForm:function(){this.addData(k(this.form))},resetForm:function(){this.$refs.formRef.resetFields()},openDetailedDialog:function(){this.$refs.customBuildInfoDialog.openDialog(k(this.form).buildList)}}},G=V,J=(r("442a"),Object(M["a"])(G,y,w,!1,null,"55842793",null)),W=J.exports,U={components:{BuildInfoForm:W},name:"Calculator",data:function(){var e=this,t=400;return{colors:["#000000"],containerWidth:0,buildNum:t,showList:[],visibleCount:0,onlyVisibleNode:null,fortunePercent:10,highlighting:null,orgOptions:{tooltip:{backgroundColor:"rgba(50,50,50,0.8)",trigger:"axis",formatter:function(t){return"".concat(t[0].axisValue," 抽内毕业概率：<table>").concat(t.filter((function(t){var r=t.seriesIndex;return e.showList[r].show})).map((function(e){return"<tr>\n                    <td>".concat(e.marker,'</td>\n                    <td align="left">').concat(e.seriesName,'</td>\n                    <td align="right">').concat(e.value.toFixed(2),"%</td>\n                  </tr>")})).join(""),"</table>")},confine:!0,axisPointer:{type:"cross",lineStyle:{color:"#000000"},crossStyle:{color:"#000000"}}},xAxis:{name:"建造次数",nameLocation:"center",nameGap:35,type:"category",data:Array(t+1).fill(0).map((function(e,t){return t})),axisLine:{lineStyle:{color:"#000000"}}},yAxis:{name:"毕业率",nameLocation:"center",nameGap:40,min:0,max:100,type:"value",axisLabel:{formatter:"{value}%"},axisLine:{lineStyle:{color:"#000000"}}},series:[]}}},mounted:function(){this.colors=this.$refs.buildChart.computedOptions.color;var e=[],t=localStorage.getItem("log");if(t)try{e=JSON.parse(t)}catch(i){}0===e.length&&(e=v.map((function(e){return Object(u["a"])(Object(u["a"])({},e),{},{buildList:Array.isArray(e.buildList)?e.buildList:k(e.buildList).buildList})})));var r,n=Object(c["a"])(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.drawLine(a)}}catch(o){n.e(o)}finally{n.f()}},methods:{percentFormatter:I,guaranteeFormatter:q,percentComparator:P,timeFormatter:z,getColor:function(e){return this.colors[e%this.colors.length]},drawLine:function(e){var t=e.desc,r=e.buildList,n=e.date,a=e.show,i=new g(r),o=this,s={opacity:a?1:0,get shadowColor(){return o.getColor(d.index)},shadowBlur:0},c=i.getProbability(this.buildNum),u={name:t,data:c,type:"line",itemStyle:s,lineStyle:s,markLine:{symbol:"none",symbolSize:10,label:{get show(){return o.onlyVisibleNode===d},position:"start",distance:20,formatter:function(e){var t=Object(l["a"])(e.data.coord,2),r=t[0],n=t[1];return"".concat(e.name,": ").concat(0===r?n+"%":r)}},lineStyle:s,data:this.calcFortuneLines(c)}},d={desc:t,mean:Number(i.mean.toFixed(2)),date:n,buildList:r,builder:i,chartData:u,index:this.showList.length,get show(){return 1===s.opacity},set show(e){this.show!==e&&(s.opacity=e?1:0,e?o.visibleCount++:o.visibleCount--)},get highlight(){return 3===s.shadowBlur},set highlight(e){s.shadowBlur=e?3:0}};this.showList.push(d),this.orgOptions.series.push(u),a&&this.visibleCount++},addLine:function(e){var t=e.desc,r=e.buildList,n=e.show,a=void 0===n||n;this.drawLine({desc:t,buildList:r,date:Date.now(),show:a}),this.updateLocalStorage()},deleteAll:function(){this.showList=[],this.orgOptions.series=[],this.orgOptions=Object(u["a"])({},this.orgOptions),this.visibleCount=0,this.updateLocalStorage()},toggleShown:function(e){e.show=!e.show,this.updateLocalStorage()},deleteLine:function(e){var t=e.index;this.showList.splice(t,1);for(var r=t;r<this.showList.length;r++)this.showList[r].index=r;this.orgOptions.series.splice(t,1),this.orgOptions=Object(u["a"])({},this.orgOptions),this.visibleCount--,this.updateLocalStorage()},updateLocalStorage:function(){localStorage.setItem("log",JSON.stringify(this.showList.map((function(e){var t=e.desc,r=e.buildList,n=e.date,a=e.show;return{desc:t,buildList:r,date:n,show:a}}))))},cellMouseEnter:function(e,t,r,n){this.highlighting!==e&&(this.highlighting&&(this.highlighting.highlight=!1),this.highlighting=e,e.highlight=!0)},cellMouseLeave:function(e,t,r,n){e.highlight=!1,this.highlighting=null},onChartContainerResize:function(e){this.containerWidth=e.detail.width},calcFortuneLines:function(e){var t=this.fortunePercent;return[{name:"欧",index:e.findIndex((function(e){return e>=t}))},{name:"亚",index:e.findIndex((function(e){return e>=50}))},{name:"非",index:e.findIndex((function(e){return e>=100-t}))}].map((function(t){var r=t.name,n=t.index;return[{name:r,coord:[n,0]},{coord:[n,e[n]]}]}))}},watch:{buildNum:function(e,t){this.orgOptions.xAxis.data=Array(e+1).fill(0).map((function(e,t){return t}));var r,n=Object(c["a"])(this.orgOptions.series);try{for(n.s();!(r=n.n()).done;){var a=Object(l["a"])(r.value,2),i=a[0],o=a[1];o.data=this.showList[i].builder.getProbability(e),o.markLine.data=this.calcFortuneLines(o.data)}}catch(s){n.e(s)}finally{n.f()}},visibleCount:function(e,t){this.onlyVisibleNode=1===e?this.showList.find((function(e){return e.show})):null},fortunePercent:function(e,t){var r,n=Object(c["a"])(this.orgOptions.series);try{for(n.s();!(r=n.n()).done;){var a=r.value;a.markLine.data=this.calcFortuneLines(a.data)}}catch(i){n.e(i)}finally{n.f()}}}},H=U,K=(r("1c77"),r("9d86"),Object(M["a"])(H,o,s,!1,null,"3044d06b",null)),Q=K.exports,X={name:"app",components:{Calculator:Q}},Y=X,Z=(r("034f"),Object(M["a"])(Y,a,i,!1,null,null,null)),ee=Z.exports,te=r("5c96"),re=r.n(te);r("c69f");n["default"].use(re.a);var ne=r("9ca8"),ae=r("06aa"),ie=r.n(ae);n["default"].config.productionTip=!1,n["default"].component("v-chart",ne["a"]),n["default"].use(ie.a),new n["default"]({render:function(e){return e(ee)}}).$mount("#app")},"77b5":function(e,t,r){},8354:function(e,t,r){},"85ec":function(e,t,r){},"90bf":function(e,t,r){},"9d86":function(e,t,r){"use strict";r("77b5")},bcac:function(e,t,r){"use strict";r("8354")},c69f:function(e,t,r){},d025:function(e,t,r){}});
//# sourceMappingURL=app-legacy.d090ab21.js.map